import EmptyBox from "../EmptyBox/EmptyBox";
import Pawn from "../Pawn/Pawn";
import PieceSituation from "../PieceSituation/PieceSituation";
import Position from "../Position/Position";
import TravelPlay from "../TravelPlay/TravelPlay";
import { Color, MoveStr } from "../utils/type";

class Queen extends Pawn {
  type: string = "Queen";
  eatenMoves: MoveStr[] = MOVES_SITUATION;
  travelMoves: MoveStr[] = MOVES_SITUATION;
  constructor(color: Color) {
    super(color);
  }
  getTravelPlays(situation: PieceSituation, position: Position): TravelPlay[] {
    const result: TravelPlay[] = [];

    TRAVEL_MOVES_COMBINATION.forEach((combination) => {
      if (
        combination.every(
          (move) =>
            situation.get()[move] && situation.get()[move] instanceof EmptyBox
        )
      ) {
        result.push(
          TravelPlay.fromMove(position, combination[combination.length - 1])
        );
      }
    });
    return result;
  }
}

const MOVES_SITUATION: MoveStr[] = [
  "+1.+1",
  "+2.+2",
  "+3.+3",
  "+4.+4",
  "+5.+5",
  "+6.+6",
  "+7.+7",
  "+8.+8",
  "+9.+9",
  "-1.+1",
  "-2.+2",
  "-3.+3",
  "-4.+4",
  "-5.+5",
  "-6.+6",
  "-7.+7",
  "-8.+8",
  "-9.+9",
  "+1.-1",
  "+2.-2",
  "+3.-3",
  "+4.-4",
  "+5.-5",
  "+6.-6",
  "+7.-7",
  "+8.-8",
  "+9.-9",
  "-1.-1",
  "-2.-2",
  "-3.-3",
  "-4.-4",
  "-5.-5",
  "-6.-6",
  "-7.-7",
  "-8.-8",
  "-9.-9",
];
const TRAVEL_MOVES_COMBINATION: MoveStr[][] = [
  ["+1.+1"],
  ["+1.+1", "+2.+2"],
  ["+1.+1", "+2.+2", "+3.+3"],
  ["+1.+1", "+2.+2", "+3.+3", "+4.+4"],
  ["+1.+1", "+2.+2", "+3.+3", "+4.+4", "+5.+5"],
  ["+1.+1", "+2.+2", "+3.+3", "+4.+4", "+5.+5", "+6.+6"],
  ["+1.+1", "+2.+2", "+3.+3", "+4.+4", "+5.+5", "+6.+6", "+7.+7"],
  ["+1.+1", "+2.+2", "+3.+3", "+4.+4", "+5.+5", "+6.+6", "+7.+7", "+8.+8"],
  [
    "+1.+1",
    "+2.+2",
    "+3.+3",
    "+4.+4",
    "+5.+5",
    "+6.+6",
    "+7.+7",
    "+8.+8",
    "+9.+9",
  ],
  ["-1.+1"],
  ["-1.+1", "-2.+2"],
  ["-1.+1", "-2.+2", "-3.+3"],
  ["-1.+1", "-2.+2", "-3.+3", "-4.+4"],
  ["-1.+1", "-2.+2", "-3.+3", "-4.+4", "-5.+5"],
  ["-1.+1", "-2.+2", "-3.+3", "-4.+4", "-5.+5", "-6.+6"],
  ["-1.+1", "-2.+2", "-3.+3", "-4.+4", "-5.+5", "-6.+6", "-7.+7"],
  ["-1.+1", "-2.+2", "-3.+3", "-4.+4", "-5.+5", "-6.+6", "-7.+7", "-8.+8"],
  [
    "-1.+1",
    "-2.+2",
    "-3.+3",
    "-4.+4",
    "-5.+5",
    "-6.+6",
    "-7.+7",
    "-8.+8",
    "-9.+9",
  ],
  ["-1.-1"],
  ["-1.-1", "-2.-2"],
  ["-1.-1", "-2.-2", "-3.-3"],
  ["-1.-1", "-2.-2", "-3.-3", "-4.-4"],
  ["-1.-1", "-2.-2", "-3.-3", "-4.-4", "-5.-5"],
  ["-1.-1", "-2.-2", "-3.-3", "-4.-4", "-5.-5", "-6.-6"],
  ["-1.-1", "-2.-2", "-3.-3", "-4.-4", "-5.-5", "-6.-6", "-7.-7"],
  ["-1.-1", "-2.-2", "-3.-3", "-4.-4", "-5.-5", "-6.-6", "-7.-7", "-8.-8"],
  [
    "-1.-1",
    "-2.-2",
    "-3.-3",
    "-4.-4",
    "-5.-5",
    "-6.-6",
    "-7.-7",
    "-8.-8",
    "-9.-9",
  ],
  ["+1.-1"],
  ["+1.-1", "+2.-2"],
  ["+1.-1", "+2.-2", "+3.-3"],
  ["+1.-1", "+2.-2", "+3.-3", "+4.-4"],
  ["+1.-1", "+2.-2", "+3.-3", "+4.-4", "+5.-5"],
  ["+1.-1", "+2.-2", "+3.-3", "+4.-4", "+5.-5", "+6.-6"],
  ["+1.-1", "+2.-2", "+3.-3", "+4.-4", "+5.-5", "+6.-6", "+7.-7"],
  ["+1.-1", "+2.-2", "+3.-3", "+4.-4", "+5.-5", "+6.-6", "+7.-7", "+8.-8"],
  [
    "+1.-1",
    "+2.-2",
    "+3.-3",
    "+4.-4",
    "+5.-5",
    "+6.-6",
    "+7.-7",
    "+8.-8",
    "+9.-9",
  ],
];
export default Queen;
